# What is a distributed system?

分散システムは独立したコンピュータ要素の集合体で、ユーザは単一のロジカルなシステムとして思われる。

## 特徴1:独立したコンピュータ要素の集合体

基本原則はノードはお互いに独立して振る舞うことができる。
それらが互いに無視しても、同じ分散システムの中に入れても意味がないのは明白であるけれども。
重要なのは、独立したノードを扱う結果として、それぞれが独自の時間概念を持つということ。
言い換えれば、私たちは、常に世界的な時計のようなものがあるとは思えません。

このような共通の時間基準の欠如は、分散システム内での同期と調整に関する根本的な問題につながる
これについては、第6章

ノードの集合を扱っているということは、そのコレクションのメンバーシップと組織を管理します。
つまり、どのノードがシステムに属しているのかそうでないのかを登録し、
各メンバーに直接通信できるノードのリストを提供する必要があるかもしれません。
入会管理の理由からのみグループメンバーシップを管理することは非常に困難です。
説明するために、私たちはオープングループとクローズドグループを区別します。

オープン・グループでは、どのノードも分散システムに参加することができます。
これは、システム内の他のノードにメッセージを送信できることを意味します。
対照的に、閉鎖されたグループでは、そのグループのメンバーだけが互いに通信することができ、
ノードがグループに参加または離れることを可能にするために別個のメカニズムが必要です。
入場管理が困難になることは理解しにくいことではありません。
第1に、ノードを認証するためのメカニズムが必要であり、第9章で説明するように、適切に設計されていないと、
認証管理によって容易にスケーラビリティのボトルネックが発生する可能性があります。

第2に、原則として、各ノードは、実際に他のグループメンバーと通信しているかどうかをチェックしなければならず、
例えば、混乱を招くことを目指す侵入者ではない。最後に、メンバーが非メンバーと容易に通信できることを考慮すると、
機密性が分散システム内の通信の問題である場合、信頼の問題に直面する可能性があります。
コレクションの編成に関して、実践は、分散型システムがオーバレイネットワークとして組織されることを示している[Tarkoma、2010]。
この場合、ノードは通常、メッセージを直接送信できる他のプロセスのリストを備えたソフトウェアプロセスです。
また、隣人を最初に探す必要がある場合もあります。
メッセージの受け渡しは、TCP / IPまたはUDPチャネルを介して行われますが、
第4章で説明するように、より高度な機能も利用可能です。

オーバレイネットワークには、大きく分けて2つのタイプがあります。

### 構造化オーバーレイ：

この場合、各ノードは通信可能な明確なネイバーセットを持っています。 
たとえば、ノードはツリーまたは論理リングで編成されます。 

### 非構造化オーバーレイ：

これらのオーバーレイでは、各ノードにランダムに選択された他のノードへの参照が多数あります。

いずれにしても、オーバレイネットワークは原則として常に接続されていなければなりません。
すなわち、任意の2つのノード間に常にメッセージが1つのノードから別のノードにルーティングされる通信パスが存在することを意味します。
よく知られたクラスのオーバーレイはピアツーピア（P2P）ネットワークによって形成される。 
オーバーレイの例については、第2章以降の章で詳しく説明します。 ノードの構成には特別な努力が必要であり、
時には分散システム管理のより複雑な部分の1つであることを認識することが重要です。

## 特性2：単一コヒーレントシステム

前述のように、分散システムは単一のコヒーレントシステムとして現れるべきです。
場合によっては、単一のシステムビューが必要であると言わざるを得ず、
エンドユーザーはプロセス、データ、および制御がコンピュータに分散されているという事実にも気づくべきではないネットワーク。
単一システムのビューを達成することは、しばしばあまりにも多くのことを求めています。
なぜなら、私たちが分散システムを定義するにあたって、私たちはより弱いもの、つまり一貫しているものを選択したからです。
大雑把に言えば、分散システムは、ユーザーの期待に応じて動作すれば、一貫性があります。
より具体的には、単一のコヒーレントシステムでは、ノードとノードとの間の相互作用がどこで、いつ、どのように行われても、ノードの集合全体が同じように動作する。
単一の一貫性のあるビューを提供することは、しばしば挑戦的です。
たとえば、エンドユーザーは、プロセスが現在実行中のコンピュータを正確に知ることができないか、
タスクの一部が他のプロセスで実行されている可能性があります。
同様に、データが格納される場所は問題ではなく、パフォーマンスを向上させるためにシステムがデータを複製していることも重要ではありません。
セクション1.2でより広範囲に議論する、いわゆる分散分布の透明性は、分散システムの重要な設計目標です。
ある意味では、Unixライクなオペレーティングシステムのアプローチと同じですが、ファイルシステム、ストレージデバイス、メインメモリ間の違いを効果的に隠すために、
ファイルシステムのインターフェイスを統一してリソースにアクセスします。
しかし、単一のコヒーレントなシステムを目指すことは、重要なトレードオフをもたらす。
分散型システムが複数のネットワーク化されたノードで構成されているという事実を無視できないので、
いつでもシステムの一部だけが故障することは避けられません。
これは、例えば、一部のアプリケーションが正常に実行され続けている間に他のアプリケーションが途切れてしまうといった予期しない動作が処理される必要がある現実であることを意味します。
部分的な障害は、複雑なシステムに固有のものですが、分散システムでは、それらを隠すことは特に困難です。
チューリング賞を受賞したLeslie Lamport氏は、分散システムを「[。 。 。 ]あなたが知りませんでしたコンピュータの失敗が存在すると、
自分のコンピュータを使用できなくする可能性があります。


## ミドルウェアと分散システム

分散アプリケーションの開発を支援するために、
分散システムは、システムの一部であるコンピュータのそれぞれのオペレーティングシステムの上に論理的に配置された別個のソフトウェアレイヤを持つように構成されることがよくあります。
この組織は図1.1に示されており、ミドルウェアとして知られています[Bernstein、1996]。
図1.1：ミドルウェア層に編成された分散システム。
複数のマシンにまたがっており、各アプリケーションに同じインターフェースを提供します。
図1.1には、4台のネットワークコンピュータと3台のアプリケーションが示されています。

そのうちのapplicationBは、コンピュータ2と3に分散しています。各アプリケーションには同じインターフェイスが提供されています。
分散システムは、単一の分散アプリケーションのコンポーネントが互いに通信する手段を提供するだけでなく、異なるアプリケーションが通信できるようにする手段を提供します。
同時に、各アプリケーションのハードウェアとオペレーティングシステムの相違点を可能な限り最高かつ合理的に隠します。
ある意味では、ミドルウェアはオペレーティングシステムがコンピュータと同じように分散システムと同じです。
リソースの管理者は、ネットワーク上でこれらのリソースを効率的に共有および展開するためのアプリケーションを提供します。
リソース管理の隣には、以下を含むほとんどのオペレーティングシステムでも見られるサービスがあります。
* アプリケーション間通信のための機能。
* セキュリティサービス。
* 会計サービス。 
* 障害のマスキングと復旧。
オペレーティングシステムの同等の主な相違点は、ネットワーク環境でミドルウェアサービスが提供されていることです。
また、ほとんどのサービスは多くのアプリケーションにとって有用であることに注意してください。

この意味で、ミドルウェアは、アプリケーションで個別に実装する必要がなくなった、
一般的に使用されるコンポーネントと関数のコンテナとも見なすことができます。
これらの点をさらに説明するために、典型的なミドルウェアサービスのいくつかの例を簡単に考えてみましょう。

### 通信：

一般的な通信サービスはいわゆるリモートプロシージャコール（RPC）です。
RPCサービスは、第4章で取り上げるように、アプリケーションがローカルコンピュータのように実装され実行される関数を呼び出すことを可能にします。
この目的のために、開発者は特別なプログラミング言語で表現された関数ヘッダーを指定するだけでよく、
そこからRPCサブシステムがリモート呼び出しを確立するために必要なコードを生成することができます。

### トランザクション：

多くのアプリケーションでは、複数のコンピュータ間で分散されている複数のサービスを利用しています。
ミドルウェアは、一般的に、アトミックトランザクションと呼ばれるオール・オア・ナッシングの方法で
そのようなサービスを実行するための特別なサポートを提供します。
この場合、アプリケーション開発者は関連するリモートサービスを指定するだけでよく、標準化されたプロトコルをフォローすることによって、
ミドルウェアはすべてのサービスが呼び出されるかどうかを確認します。

### サービスの構成：

既存のプログラムを使用してそれらを結合することによって、新しいアプリケーションを開発することがますます一般的になりつつあります。
これは、特にWebサービスとして知られている多くのWebベースのアプリケーション[Alonso et al。、2004]の場合に顕著です。 
Webベースのミドルウェアは、Webサービスへのアクセス方法を標準化し、特定の順序で機能を生成する手段を提供することによって役立ちます。
サービスの構成がどのように展開されるかの簡単な例は、マッシュアップによって形成されます。
異なるソースからのデータを結合して集約するWebページ。よく知られているマッシュアップはGoogleマップに基づいたもので、
トリッププランナーやリアルタイムの天気予報などの追加情報を使ってマップを強化しています。

### 信頼性：

最後の例として、信頼性の高い分散アプリケーションを構築するための高度な機能の提供に関する豊富な研究があります。 
Horusツールキット[van Renesse et al。、1994]は、開発者があるプロセスによって送信されたメッセージが
他のすべてのプロセスによって受信されることを保証するプロセスのグループとしてアプリケーションを構築することを可能にします。
判明したように、そのような保証は分散アプリケーションの開発を大幅に簡素化し、通常はミドルウェアの一部として実装されます。

注1.1（歴史的注記：用語ミドルウェア）用語ミドルウェアは1990年代半ばに普及したが、
1968年10月にPeter NaurとBrian Randellによって編集されたNATOソフトウェアエンジニアリング会議の報告書で初めて言及された [Naur and Randell、1968]。 
実際、ミドルウェアはアプリケーションとサービスルーチン（オペレーティングシステムに相当）の間に正確に配置されていました。
